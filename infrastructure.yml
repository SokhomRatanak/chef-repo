# todo: add oh-my-zsh as recipe
# todo: change role in ci.web-essentials.asia
# todo: fix apache on web-esentials.asia
# todo: add a substitue on documentation for Git repo


# INSTALL SERVER

#cd /usr/share/php/PHP/CodeSniffer/Standards
#svn co http://subversion.assembla.com/svn/pti/libraries/pear/PEAR/PHP/CodeSniffer/Standards/TYPO3 TYPO3
#svn co http://subversion.assembla.com/svn/pti/libraries/pear/PEAR/PHP/CodeSniffer/Standards/TYPO3v4 TYPO3v4

#svn co https://svn.typo3.org/Teams/forge.typo3.org/hudson-helpers/tools/PHP_CodeSniffer/TYPO3/trunk/ TYPO3
#svn co https://svn.typo3.org/Teams/forge.typo3.org/hudson-helpers/tools/PHP_CodeSniffer/TYPO3v4/trunk/ TYPO3v4


#-> ADD AUTOMATIC UPGRADE PEAR
#http://www.assembla.com/code/pti/subversion/nodes/build/automatic-pear-update/build.xml

cookbooks:

  - base:                # (site-cookbook)
  - oh-my-zsh:
  - apt:
  - ntp:
  - iptables:

  - build-essential:
  - xml:                 # -> dependency mysql
  - openssl:             # -> dependency mysql
  - runit:               # -> dependency jenkins
  - java:                # -> dependency jenkins

  - apache2:
  - mysql:
  - php:
  - typo3:               # (site-cookbook)
  - jenkins:
  - functional-test:     # (site-cookbook)
  - unit-test:           # (site-cookbook)

roles:
  - base:
  - typo3-server:
  - ci-server:

#data bags:
#  - apps:
#    - typo3

#nodes:
   # MANGO
#  - mango:
#    - role[base] role[web] role[web-typo3] role[ci] role[unit-test]
#    - -x fudriot --sudo
     # knife node run_list add mango 'role[base]'
     # knife node run_list add mango 'role[web]'
     # knife node run_list add mango 'role[web-typo3]'
     # knife node run_list add mango 'role[ci]'
     # knife node run_list add mango 'role[unit-test]'
     # knife node run_list add mango 'role[behaviour]'
     # knife ssh name:mango -x fudriot "sudo chef-client"
